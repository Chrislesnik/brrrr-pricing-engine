/* Import shared UI styles */
@import "@repo/ui/globals.css";

/* Liveblocks default + dark-mode styles */
@import "@liveblocks/react-ui/styles.css";
@import "@liveblocks/react-ui/styles/dark/attributes.css";

/* App-specific styles can be added below */

/* -----------------------------------------------------------------------
   Liveblocks Comments — dark-mode overrides
   Strip blocky backgrounds and make the UI feel native / minimal
   ----------------------------------------------------------------------- */

/* Map Liveblocks accent to the app's primary color */
.lb-root {
  --lb-accent: hsl(var(--primary));
  --lb-accent-foreground: hsl(var(--primary-foreground));
  --lb-dynamic-background: hsl(var(--background));
  --lb-foreground: hsl(var(--foreground));
}

/* Composer send / submit button — use app primary, not Liveblocks blue */
.lb-composer-action[type="submit"],
.lb-button[type="submit"],
button.lb-composer-action:last-child,
.lb-composer [data-submit],
.lb-icon-button[type="submit"] {
  background: hsl(var(--primary)) !important;
  color: hsl(var(--primary-foreground)) !important;
  border: none !important;
  border-radius: 0.5rem !important;
}

.lb-composer-action[type="submit"]:hover,
.lb-button[type="submit"]:hover,
button.lb-composer-action:last-child:hover,
.lb-composer [data-submit]:hover,
.lb-icon-button[type="submit"]:hover {
  background: hsl(var(--primary) / 0.8) !important;
}

/* Any remaining accent-colored elements — links, active states */
.lb-accent,
.lb-comment a,
.lb-thread a {
  color: hsl(var(--primary)) !important;
}

.lb-comment,
.lb-thread {
  background: transparent !important;
  border: none !important;
  box-shadow: none !important;
}

/* Remove card-like background from individual comment containers */
.lb-comment-content {
  background: transparent !important;
}

/* Clean up the composer — no heavy box-shadow or background block */
.lb-composer {
  background: hsl(var(--muted) / 0.3) !important;
  border: 1px solid hsl(var(--border)) !important;
  box-shadow: none !important;
  border-radius: 0.75rem !important;
}

.lb-composer:focus-within {
  border-color: hsl(var(--ring)) !important;
  background: hsl(var(--muted) / 0.5) !important;
}

/* Composer editor placeholder */
.lb-composer-editor [data-placeholder]::before {
  color: hsl(var(--muted-foreground)) !important;
}

/* Reaction badges — subtle, not blocky */
.lb-comment-reaction {
  background: hsl(var(--muted) / 0.4) !important;
  border: 1px solid hsl(var(--border) / 0.5) !important;
  border-radius: 9999px !important;
}

.lb-comment-reaction:hover {
  background: hsl(var(--muted) / 0.7) !important;
}

.lb-comment-reaction[data-active] {
  background: hsl(var(--primary) / 0.15) !important;
  border-color: hsl(var(--primary) / 0.4) !important;
}

/* Toolbar / action buttons — keep them subtle */
.lb-comment-actions,
.lb-toolbar {
  background: hsl(var(--popover)) !important;
  border: 1px solid hsl(var(--border)) !important;
  border-radius: 0.5rem !important;
  box-shadow: 0 2px 8px hsl(0 0% 0% / 0.25) !important;
}

/* Thread component in detail view — no extra card styling */
.lb-thread-comments {
  background: transparent !important;
}

/* Thread reply composer — match the spacing of the main chat composer
   wrapper (px-3 py-3 = 0.75rem). Adds margin around the form so the
   composer box has the same distance from the panel walls. */
.lb-thread-composer {
  margin: 0.75rem !important;
}

/* Composer formatting toolbar */
.lb-composer-toolbar {
  background: transparent !important;
  border-top: 1px solid hsl(var(--border) / 0.5) !important;
}

/* Composer submit button area */
.lb-composer-footer {
  background: transparent !important;
}

/* Keep submit button visually active and clickable when the composer has
   attachments, even if the text editor is empty. The JS hook in
   comments-panel.tsx handles the actual submission logic. */
.lb-composer:has(.lb-composer-attachment) button[type="submit"]:disabled,
.lb-composer:has(.lb-composer-attachments) button[type="submit"]:disabled,
.lb-composer-form:has(.lb-composer-attachment) button[type="submit"]:disabled,
.lb-composer-form:has(.lb-composer-attachments) button[type="submit"]:disabled {
  opacity: 1 !important;
  pointer-events: auto !important;
  cursor: pointer !important;
  background: hsl(var(--primary)) !important;
  color: hsl(var(--primary-foreground)) !important;
}

/* Hide the empty text body area in comments that only have attachments */
.lb-comment-body:empty,
.lb-comment-content > .lb-comment-body:has(> p:only-child:empty),
.lb-comment-content > .lb-comment-body:has(> :only-child:not(.lb-attachments)):empty {
  display: none !important;
}

/* Also collapse the body when it only contains a zero-width space (injected
   by our attachment-only submission workaround) */
.lb-comment-body > p:only-child:empty {
  display: none !important;
}
